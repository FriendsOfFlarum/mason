module.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=28)}([function(e,t){e.exports=flarum.core.compat.app},function(e,t){e.exports=flarum.core.compat.Model},function(e,t,n){"use strict";function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,"a",(function(){return a}))},function(e,t){e.exports=flarum.core.compat.Component},function(e,t){e.exports=flarum.core.compat.extend},function(e,t){e.exports=flarum.core.compat["helpers/icon"]},function(e,t){e.exports=flarum.core.compat["components/Button"]},function(e,t,n){"use strict";t.a=function(e,t){return void 0===t&&(t="sort"),e.sort((function(e,n){return e[t]()-n[t]()}))}},function(e,t){e.exports=flarum.core.compat["components/Switch"]},function(e,t){e.exports=flarum.core.compat["utils/mixin"]},function(e,t){e.exports=flarum.core.compat["utils/ItemList"]},function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n(2),r=(n(0),n(1)),o=n.n(r),i=n(9),s=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.apiEndpoint=function(){return"/flagrow/mason/answers"+(this.exists?"/"+this.data.id:"")},t}(n.n(i)()(o.a,{content:o.a.attribute("content"),is_suggested:o.a.attribute("is_suggested"),sort:o.a.attribute("sort"),field:o.a.hasOne("field")}))},function(e,t){e.exports=flarum.core.compat["utils/computed"]},function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n(2),r=(n(0),n(1)),o=n.n(r),i=n(9),s=n.n(i),l=n(12),d=n.n(l),u=function(e){function t(){return e.apply(this,arguments)||this}return Object(a.a)(t,e),t.prototype.apiEndpoint=function(){return"/flagrow/mason/fields"+(this.exists?"/"+this.data.id:"")},t}(s()(o.a,{name:o.a.attribute("name"),description:o.a.attribute("description"),min_answers_count:o.a.attribute("min_answers_count"),max_answers_count:o.a.attribute("max_answers_count"),show_when_empty:o.a.attribute("show_when_empty"),user_values_allowed:o.a.attribute("user_values_allowed"),validation:o.a.attribute("validation"),icon:o.a.attribute("icon"),sort:o.a.attribute("sort"),deleted_at:o.a.attribute("deleted_at",o.a.transformDate),all_answers:o.a.hasMany("all_answers"),suggested_answers:o.a.hasMany("suggested_answers"),required:d()("min_answers_count",(function(e){return e>0})),multiple:d()("max_answers_count",(function(e){return e>1}))}))},,,,,,,,,function(e,t){e.exports=flarum.core.compat["components/AdminNav"]},function(e,t){e.exports=flarum.core.compat["components/AdminLinkButton"]},function(e,t){e.exports=flarum.core.compat["utils/saveSettings"]},function(e,t){e.exports=flarum.core.compat["components/Select"]},function(e,t){e.exports=flarum.core.compat["components/PermissionGrid"]},,function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(11),i=n(13),s=n(4),l=n(22),d=n.n(l),u=n(23),c=n.n(u),f=n(2);function p(e,t,n){if(void 0===n)return e&&e.h5s&&e.h5s.data&&e.h5s.data[t];e.h5s=e.h5s||{},e.h5s.data=e.h5s.data||{},e.h5s.data[t]=n}var h=function(e,t){if(!(e instanceof NodeList||e instanceof HTMLCollection||e instanceof Array))throw new Error("You must provide a nodeList/HTMLCollection/Array of elements to be filtered.");return"string"!=typeof t?Array.from(e):Array.from(e).filter((function(e){return 1===e.nodeType&&e.matches(t)}))},g=new Map,w=function(){function e(){this._config=new Map,this._placeholder=void 0,this._data=new Map}return Object.defineProperty(e.prototype,"config",{get:function(){var e={};return this._config.forEach((function(t,n){e[n]=t})),e},set:function(e){if("object"!=typeof e)throw new Error("You must provide a valid configuration object to the config setter.");var t=Object.assign({},e);this._config=new Map(Object.entries(t))},enumerable:!0,configurable:!0}),e.prototype.setConfig=function(e,t){if(!this._config.has(e))throw new Error("Trying to set invalid configuration item: "+e);this._config.set(e,t)},e.prototype.getConfig=function(e){if(!this._config.has(e))throw new Error("Invalid configuration item requested: "+e);return this._config.get(e)},Object.defineProperty(e.prototype,"placeholder",{get:function(){return this._placeholder},set:function(e){if(!(e instanceof HTMLElement)&&null!==e)throw new Error("A placeholder must be an html element or null.");this._placeholder=e},enumerable:!0,configurable:!0}),e.prototype.setData=function(e,t){if("string"!=typeof e)throw new Error("The key must be a string.");this._data.set(e,t)},e.prototype.getData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.get(e)},e.prototype.deleteData=function(e){if("string"!=typeof e)throw new Error("The key must be a string.");return this._data.delete(e)},e}(),v=function(e){if(!(e instanceof HTMLElement))throw new Error("Please provide a sortable to the store function.");return g.has(e)||g.set(e,new w),g.get(e)};function b(e,t,n){if(e instanceof Array)for(var a=0;a<e.length;++a)b(e[a],t,n);else e.addEventListener(t,n),v(e).setData("event"+t,n)}function y(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)y(e[n],t);else e.removeEventListener(t,v(e).getData("event"+t)),v(e).deleteData("event"+t)}function _(e,t,n){if(e instanceof Array)for(var a=0;a<e.length;++a)_(e[a],t,n);else e.setAttribute(t,n)}function E(e,t){if(e instanceof Array)for(var n=0;n<e.length;++n)E(e[n],t);else e.removeAttribute(t)}var x=function(e){if(!e.parentElement||0===e.getClientRects().length)throw new Error("target element must be part of the dom");var t=e.getClientRects()[0];return{left:t.left+window.pageXOffset,right:t.right+window.pageXOffset,top:t.top+window.pageYOffset,bottom:t.bottom+window.pageYOffset}},T=function(e,t){if(!(e instanceof HTMLElement&&(t instanceof NodeList||t instanceof HTMLCollection||t instanceof Array)))throw new Error("You must provide an element and a list of elements.");return Array.from(t).indexOf(e)},A=function(e){if(!(e instanceof HTMLElement))throw new Error("Element is not a node element.");return null!==e.parentNode},F=function(e,t,n){if(!(e instanceof HTMLElement&&e.parentElement instanceof HTMLElement))throw new Error("target and element must be a node");e.parentElement.insertBefore(t,"before"===n?e:e.nextElementSibling)},S=function(e,t){return F(e,t,"after")},M=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return["height","padding-top","padding-bottom"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},C=function(e){if(!(e instanceof HTMLElement))throw new Error("You must provide a valid dom element");var t=window.getComputedStyle(e);return["width","padding-left","padding-right"].map((function(e){var n=parseInt(t.getPropertyValue(e),10);return isNaN(n)?0:n})).reduce((function(e,t){return e+t}))},L=function(e,t){if(!(e instanceof Array))throw new Error("You must provide a Array of HTMLElements to be filtered.");return"string"!=typeof t?e:e.filter((function(e){return e.querySelector(t)instanceof HTMLElement||e.shadowRoot&&e.shadowRoot.querySelector(t)instanceof HTMLElement})).map((function(e){return e.querySelector(t)||e.shadowRoot&&e.shadowRoot.querySelector(t)}))},O=function(e){return e.composedPath&&e.composedPath()[0]||e.target},j=function(e,t,n){return{element:e,posX:n.pageX-t.left,posY:n.pageY-t.top}},H=function(e,t){if(!0===e.isSortable){var n=v(e).getConfig("acceptFrom");if(null!==n&&!1!==n&&"string"!=typeof n)throw new Error('HTML5Sortable: Wrong argument, "acceptFrom" must be "null", "false", or a valid selector string.');if(null!==n)return!1!==n&&n.split(",").filter((function(e){return e.length>0&&t.matches(e)})).length>0;if(e===t)return!0;if(void 0!==v(e).getConfig("connectWith")&&null!==v(e).getConfig("connectWith"))return v(e).getConfig("connectWith")===v(t).getConfig("connectWith")}return!1},B={items:null,connectWith:null,disableIEFix:null,acceptFrom:null,copy:!1,placeholder:null,placeholderClass:"sortable-placeholder",draggingClass:"sortable-dragging",hoverClass:!1,debounce:0,throttleTime:100,maxItems:0,itemSerializer:void 0,containerSerializer:void 0,customDragImage:null,orientation:"vertical"};var I,P,D,k,N,Y,q,U,z,W=function(e,t){if("string"==typeof v(e).getConfig("hoverClass")){var n=v(e).getConfig("hoverClass").split(" ");!0===t?(b(e,"mousemove",function(e,t){var n=this;if(void 0===t&&(t=250),"function"!=typeof e)throw new Error("You must provide a function as the first argument for throttle.");if("number"!=typeof t)throw new Error("You must provide a number as the second argument for throttle.");var a=null;return function(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];var i=Date.now();(null===a||i-a>=t)&&(a=i,e.apply(n,r))}}((function(t){0===t.buttons&&h(e.children,v(e).getConfig("items")).forEach((function(e){var a,r;e!==t.target?(a=e.classList).remove.apply(a,n):(r=e.classList).add.apply(r,n)}))}),v(e).getConfig("throttleTime"))),b(e,"mouseleave",(function(){h(e.children,v(e).getConfig("items")).forEach((function(e){var t;(t=e.classList).remove.apply(t,n)}))}))):(y(e,"mousemove"),y(e,"mouseleave"))}},R=function(e){y(e,"dragstart"),y(e,"dragend"),y(e,"dragover"),y(e,"dragenter"),y(e,"drop"),y(e,"mouseenter"),y(e,"mouseleave")},X=function(e){var t;(t=e).h5s&&delete t.h5s.data,E(e,"aria-dropeffect")},G=function(e){E(e,"aria-grabbed"),E(e,"aria-copied"),E(e,"draggable"),E(e,"role")};function V(e,t){if(t.composedPath)return t.composedPath().find((function(e){return e.isSortable}));for(;!0!==e.isSortable;)e=e.parentElement;return e}function J(e,t){var n=p(e,"opts"),a=h(e.children,n.items).filter((function(e){return e.contains(t)||e.shadowRoot&&e.shadowRoot.contains(t)}));return a.length>0?a[0]:t}var K=function(e){var t=p(e,"opts"),n=h(e.children,t.items),a=L(n,t.handle);(_(e,"aria-dropeffect","move"),p(e,"_disabled","false"),_(a,"draggable","true"),!1===t.disableIEFix)&&("function"==typeof(document||window.document).createElement("span").dragDrop&&b(a,"mousedown",(function(){if(-1!==n.indexOf(this))this.dragDrop();else{for(var e=this.parentElement;-1===n.indexOf(e);)e=e.parentElement;e.dragDrop()}})))};function Q(e,t){var n=String(t);return t=t||{},"string"==typeof e&&(e=document.querySelectorAll(e)),e instanceof HTMLElement&&(e=[e]),e=Array.prototype.slice.call(e),/serialize/.test(n)?e.map((function(e){var t=p(e,"opts");return function(e,t,n){if(void 0===t&&(t=function(e,t){return e}),void 0===n&&(n=function(e){return e}),!(e instanceof HTMLElement)||!0==!e.isSortable)throw new Error("You need to provide a sortableContainer to be serialized.");if("function"!=typeof t||"function"!=typeof n)throw new Error("You need to provide a valid serializer for items and the container.");var a=p(e,"opts").items,r=h(e.children,a),o=r.map((function(t){return{parent:e,node:t,html:t.outerHTML,index:T(t,r)}}));return{container:n({node:e,itemCount:o.length}),items:o.map((function(n){return t(n,e)}))}}(e,t.itemSerializer,t.containerSerializer)})):(e.forEach((function(e){if(/enable|disable|destroy/.test(n))return Q[n](e);["connectWith","disableIEFix"].forEach((function(e){Object.prototype.hasOwnProperty.call(t,e)&&null!==t[e]&&console.warn('HTML5Sortable: You are using the deprecated configuration "'+e+'". This will be removed in an upcoming version, make sure to migrate to the new options when updating.')})),t=Object.assign({},B,v(e).config,t),v(e).config=t,p(e,"opts",t),e.isSortable=!0,function(e){var t=p(e,"opts"),n=h(e.children,t.items),a=L(n,t.handle);p(e,"_disabled","false"),R(n),y(a,"mousedown"),y(e,"dragover"),y(e,"dragenter"),y(e,"drop")}(e);var a,r=h(e.children,t.items);if(null!==t.placeholder&&void 0!==t.placeholder){var o=document.createElement(e.tagName);t.placeholder instanceof HTMLElement?o.appendChild(t.placeholder):o.innerHTML=t.placeholder,a=o.children[0]}v(e).placeholder=function(e,t,n){var a;if(void 0===n&&(n="sortable-placeholder"),!(e instanceof HTMLElement))throw new Error("You must provide a valid element as a sortable.");if(!(t instanceof HTMLElement)&&void 0!==t)throw new Error("You must provide a valid element as a placeholder or set ot to undefined.");return void 0===t&&(["UL","OL"].includes(e.tagName)?t=document.createElement("li"):["TABLE","TBODY"].includes(e.tagName)?(t=document.createElement("tr")).innerHTML='<td colspan="100"></td>':t=document.createElement("div")),"string"==typeof n&&(a=t.classList).add.apply(a,n.split(" ")),t}(e,a,t.placeholderClass),p(e,"items",t.items),t.acceptFrom?p(e,"acceptFrom",t.acceptFrom):t.connectWith&&p(e,"connectWith",t.connectWith),K(e),_(r,"role","option"),_(r,"aria-grabbed","false"),W(e,!0),b(e,"dragstart",(function(e){var n=O(e);if(!0!==n.isSortable&&(e.stopImmediatePropagation(),(!t.handle||n.matches(t.handle))&&"false"!==n.getAttribute("draggable"))){var a=V(n,e),r=J(a,n);q=h(a.children,t.items),N=q.indexOf(r),Y=T(r,a.children),k=a,function(e,t,n){if(!(e instanceof Event))throw new Error("setDragImage requires a DragEvent as the first argument.");if(!(t instanceof HTMLElement))throw new Error("setDragImage requires the dragged element as the second argument.");if(n||(n=j),e.dataTransfer&&e.dataTransfer.setDragImage){var a=n(t,x(t),e);if(!(a.element instanceof HTMLElement)||"number"!=typeof a.posX||"number"!=typeof a.posY)throw new Error("The customDragImage function you provided must return and object with the properties element[string], posX[integer], posY[integer].");e.dataTransfer.effectAllowed="copyMove",e.dataTransfer.setData("text/plain",O(e).id),e.dataTransfer.setDragImage(a.element,a.posX,a.posY)}}(e,r,t.customDragImage),P=M(r),D=C(r),r.classList.add(t.draggingClass),I=function(e,t){var n=e;return!0===v(t).getConfig("copy")&&(_(n=e.cloneNode(!0),"aria-copied","true"),e.parentElement.appendChild(n),n.style.display="none",n.oldDisplay=e.style.display),n}(r,a),_(I,"aria-grabbed","true"),a.dispatchEvent(new CustomEvent("sortstart",{detail:{origin:{elementIndex:Y,index:N,container:k},item:I,originalTarget:n}}))}})),b(e,"dragenter",(function(t){var n=O(t),a=V(n,t);a&&a!==U&&(z=h(a.children,p(a,"items")).filter((function(t){return t!==v(e).placeholder})),a.dispatchEvent(new CustomEvent("sortenter",{detail:{origin:{elementIndex:Y,index:N,container:k},destination:{container:a,itemsBeforeUpdate:z},item:I,originalTarget:n}}))),U=a})),b(e,"dragend",(function(n){if(I){I.classList.remove(t.draggingClass),_(I,"aria-grabbed","false"),"true"===I.getAttribute("aria-copied")&&"true"!==p(I,"dropped")&&I.remove(),I.style.display=I.oldDisplay,delete I.oldDisplay;var a=Array.from(g.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(A)[0];a&&a.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:Y,index:N,container:k},item:I}})),U=null,I=null,P=null,D=null}})),b(e,"drop",(function(n){if(H(e,I.parentElement)){n.preventDefault(),n.stopPropagation(),p(I,"dropped","true");var a=Array.from(g.values()).map((function(e){return e.placeholder})).filter((function(e){return e instanceof HTMLElement})).filter(A)[0];S(a,I),a.remove(),e.dispatchEvent(new CustomEvent("sortstop",{detail:{origin:{elementIndex:Y,index:N,container:k},item:I}}));var r=v(e).placeholder,o=h(k.children,t.items).filter((function(e){return e!==r})),i=!0===this.isSortable?this:this.parentElement,s=h(i.children,p(i,"items")).filter((function(e){return e!==r})),l=T(I,Array.from(I.parentElement.children).filter((function(e){return e!==r}))),d=T(I,s);Y===l&&k===i||e.dispatchEvent(new CustomEvent("sortupdate",{detail:{origin:{elementIndex:Y,index:N,container:k,itemsBeforeUpdate:q,items:o},destination:{index:d,elementIndex:l,container:i,itemsBeforeUpdate:z,items:s},item:I}}))}}));var i,s,l,d=(i=function(e,n,a,r){if(I)if(t.forcePlaceholderSize&&(v(e).placeholder.style.height=P+"px",v(e).placeholder.style.width=D+"px"),Array.from(e.children).indexOf(n)>-1){var o=M(n),i=C(n),s=T(v(e).placeholder,n.parentElement.children),l=T(n,n.parentElement.children);if(o>P||i>D){var d=o-P,u=i-D,c=x(n).top,f=x(n).left;if(s<l&&("vertical"===t.orientation&&r<c||"horizontal"===t.orientation&&a<f))return;if(s>l&&("vertical"===t.orientation&&r>c+o-d||"horizontal"===t.orientation&&a>f+i-u))return}void 0===I.oldDisplay&&(I.oldDisplay=I.style.display),"none"!==I.style.display&&(I.style.display="none");var m=!1;try{var p=x(n).top+n.offsetHeight/2,w=x(n).left+n.offsetWidth/2;m="vertical"===t.orientation&&r>=p||"horizontal"===t.orientation&&a>=w}catch(e){m=s<l}m?S(n,v(e).placeholder):function(e,t){F(e,t,"before")}(n,v(e).placeholder),Array.from(g.values()).filter((function(e){return void 0!==e.placeholder})).forEach((function(t){t.placeholder!==v(e).placeholder&&t.placeholder.remove()}))}else{var b=Array.from(g.values()).filter((function(e){return void 0!==e.placeholder})).map((function(e){return e.placeholder}));-1!==b.indexOf(n)||e!==n||h(n.children,t.items).length||(b.forEach((function(e){return e.remove()})),n.appendChild(v(e).placeholder))}},void 0===(s=t.debounce)&&(s=0),function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];clearTimeout(l),l=setTimeout((function(){i.apply(void 0,e)}),s)}),u=function(e){var t=e.target,n=!0===t.isSortable?t:V(t,e);if(t=J(n,t),I&&H(n,I.parentElement)&&"true"!==p(n,"_disabled")){var a=p(n,"opts");parseInt(a.maxItems)&&h(n.children,p(n,"items")).length>=parseInt(a.maxItems)&&I.parentElement!==n||(e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect=!0===v(n).getConfig("copy")?"copy":"move",d(n,t,e.pageX,e.pageY))}};b(r.concat(e),"dragover",u),b(r.concat(e),"dragenter",u)})),e)}Q.destroy=function(e){!function(e){var t=p(e,"opts")||{},n=h(e.children,t.items),a=L(n,t.handle);y(e,"dragover"),y(e,"dragenter"),y(e,"dragstart"),y(e,"dragend"),y(e,"drop"),X(e),y(a,"mousedown"),R(n),G(n),e.isSortable=!1}(e)},Q.enable=function(e){K(e)},Q.disable=function(e){!function(e){var t=p(e,"opts"),n=h(e.children,t.items),a=L(n,t.handle);_(e,"aria-dropeffect","none"),p(e,"_disabled","true"),_(a,"draggable","false"),y(a,"mousedown")}(e)},Q.__testing={_data:p,_removeItemEvents:R,_removeItemData:G,_removeSortableData:X};var Z=Q,ee=n(3),te=n.n(ee),ne=n(5),ae=n.n(ne),re=n(6),oe=n.n(re),ie=n(8),se=n.n(ie),le=function(e){function t(){return e.apply(this,arguments)||this}Object(f.a)(t,e);var n=t.prototype;return n.init=function(){this.answer=this.props.answer,this.dirty=!1,this.processing=!1},n.view=function(){var e=this;return m("form.Mason-Box",[this.answer.is_suggested()?[m("span.fas.fa-arrows-alt.Mason-Box--handle.js-answer-handle")," "]:null,m("span",{onclick:function(){var t=prompt("Edit content",e.answer.content());t&&e.updateAttribute("content",t)}},[this.answer.content()," ",ae()("fas fa-pen")]),se.a.component({state:this.answer.is_suggested(),onchange:function(t){e.updateAttribute("is_suggested",t),e.saveAnswer()},children:r.a.translator.trans("flagrow-mason.admin.fields.is_suggested")}),m(".ButtonGroup",[oe.a.component({type:"submit",className:"Button Button--primary",children:r.a.translator.trans("flagrow-mason.admin.buttons.save-answer"),loading:this.processing,disabled:!this.readyToSave(),onclick:this.saveAnswer.bind(this)}),oe.a.component({type:"submit",className:"Button Button--danger",children:r.a.translator.trans("flagrow-mason.admin.buttons.delete-answer"),loading:this.processing,onclick:this.deleteAnswer.bind(this)})])])},n.updateAttribute=function(e,t){var n;this.answer.pushAttributes(((n={})[e]=t,n)),this.dirty=!0},n.readyToSave=function(){return this.dirty},n.saveAnswer=function(){var e=this;this.processing=!0,this.answer.save(this.answer.data.attributes).then((function(){e.processing=!1,e.dirty=!1,m.redraw()})).catch((function(t){throw e.processing=!1,t}))},n.deleteAnswer=function(){var e=this;confirm(r.a.translator.trans("flagrow-mason.admin.messages.delete-answer-confirmation",{content:this.answer.content()}))&&(this.processing=!0,this.answer.delete().then((function(){e.processing=!1,m.redraw()})).catch((function(t){throw e.processing=!1,t})))},t}(te.a),de=n(7),ue=function(e){function t(){return e.apply(this,arguments)||this}Object(f.a)(t,e);var n=t.prototype;return n.init=function(){this.field=this.props.field,this.processing=!1,this.new_content="",this.showUserAnswers=!1},n.config=function(){var e=this;Z(this.element.querySelector(".js-answers-container"),{handle:".js-answer-handle"})[0].addEventListener("sortupdate",(function(){var t=e.$(".js-answer-data").map((function(){return $(this).data("id")})).get();e.updateSort(t)}))},n.view=function(){var e=this;if(!this.field.exists)return m("div",r.a.translator.trans("flagrow-mason.admin.fields.save-field-for-answers"));var t=[],n=[];return this.field.all_answers().forEach((function(e){void 0!==e&&(e.is_suggested()?t.push(e):n.push(e))})),m("div",[m(".Mason-Container.js-answers-container",Object(de.a)(t).map((function(e){return m(".js-answer-data",{key:e.id(),"data-id":e.id()},le.component({answer:e}))}))),n.length?[m(".Button.Button--block.Mason-Box-Header",{onclick:function(){e.showUserAnswers=!e.showUserAnswers}},[m(".Mason-Box-Header-Title",r.a.translator.trans("flagrow-mason.admin.buttons.show-user-answers",{count:n.length})),m("div",[ae()("fas fa-chevron-"+(this.showUserAnswers?"up":"down"))])]),this.showUserAnswers?m(".Mason-Container",Object(de.a)(n,"content").map((function(e){return m("div",{key:e.id()},le.component({answer:e}))}))):null]:null,m("form",[m(".Form-group",[m("label","New answer"),m("input.FormControl",{value:this.new_content,oninput:m.withAttr("value",(function(t){e.new_content=t})),placeholder:r.a.translator.trans("flagrow-mason.admin.fields.new-answer-placeholder")})]),m(".Form-group",[oe.a.component({type:"submit",className:"Button Button--primary",children:r.a.translator.trans("flagrow-mason.admin.buttons.add-answer"),loading:this.processing,disabled:!this.new_content,onclick:this.saveField.bind(this)})])])])},n.saveField=function(){var e=this;this.processing=!0,r.a.request({method:"POST",url:r.a.forum.attribute("apiUrl")+this.field.apiEndpoint()+"/answers",data:{data:{attributes:{content:this.new_content,is_suggested:!0}}}}).then((function(t){r.a.store.pushPayload(t),e.new_content="",e.processing=!1,m.redraw()}))},n.updateSort=function(e){r.a.request({method:"POST",url:r.a.forum.attribute("apiUrl")+this.field.apiEndpoint()+"/answers/order",data:{sort:e}}).then((function(e){r.a.store.pushPayload(e),m.redraw()}))},t}(te.a),ce=function(e){function t(){return e.apply(this,arguments)||this}Object(f.a)(t,e);var n=t.prototype;return n.init=function(){this.field=this.props.field,this.dirty=!1,this.processing=!1,this.toggleFields=!1,null===this.field&&this.initNewField()},n.initNewField=function(){this.field=r.a.store.createRecord("flagrow-mason-field",{attributes:{name:"",description:"",min_answers_count:0,max_answers_count:1,user_values_allowed:!1,show_when_empty:!1,validation:"",icon:""}})},n.boxTitle=function(){return this.field.exists?this.field.name():r.a.translator.trans("flagrow-mason.admin.buttons.new-field")},n.view=function(){var e=this;return m(".Mason-Box",[this.field.exists?m("span.fas.fa-arrows-alt.Mason-Box--handle.js-field-handle"):null,m(".Button.Button--block.Mason-Box-Header",{onclick:function(){e.toggleFields=!e.toggleFields}},[m(".Mason-Box-Header-Title",this.boxTitle()),m("div",[this.field.exists?[r.a.translator.trans("flagrow-mason.admin.buttons.edit-field")," "]:null,ae()("fas fa-chevron-"+(this.toggleFields?"up":"down"))])]),this.toggleFields?this.viewFields():null])},n.viewFields=function(){var e=this;return m("form",[m(".Mason-Box--row",[m(".Mason-Box--column",[m("h4","Field settings"),m(".Form-group",[m("label",r.a.translator.trans("flagrow-mason.admin.fields.name")),m("input.FormControl",{value:this.field.name(),oninput:m.withAttr("value",this.updateAttribute.bind(this,"name"))}),m(".helpText",r.a.translator.trans("flagrow-mason.admin.fields.name-help"))]),m(".Form-group",[m("label",r.a.translator.trans("flagrow-mason.admin.fields.description")),m("input.FormControl",{value:this.field.description(),oninput:m.withAttr("value",this.updateAttribute.bind(this,"description"))}),m(".helpText",r.a.translator.trans("flagrow-mason.admin.fields.description-help"))]),m(".Form-group",[m("label",[se.a.component({state:1===this.field.min_answers_count(),onchange:function(t){e.updateAttribute("min_answers_count",t?1:0)},children:r.a.translator.trans("flagrow-mason.admin.fields.required")})])]),m(".Form-group",[m("label",[se.a.component({state:this.field.show_when_empty(),onchange:this.updateAttribute.bind(this,"show_when_empty"),children:r.a.translator.trans("flagrow-mason.admin.fields.show_when_empty")})]),m(".helpText",r.a.translator.trans("flagrow-mason.admin.fields.show_when_empty-help"))]),m(".Form-group",[m("label",[se.a.component({state:this.field.user_values_allowed(),onchange:this.updateAttribute.bind(this,"user_values_allowed"),children:r.a.translator.trans("flagrow-mason.admin.fields.user_values_allowed")})]),m(".helpText",r.a.translator.trans("flagrow-mason.admin.fields.user_values_allowed-help"))]),m(".Form-group",[m("label",r.a.translator.trans("flagrow-mason.admin.fields.validation")),m("input.FormControl",{disabled:!this.field.user_values_allowed(),placeholder:this.field.user_values_allowed()?"":r.a.translator.trans("flagrow-mason.admin.fields.enable-user-values-for-validation"),value:this.field.validation(),oninput:m.withAttr("value",this.updateAttribute.bind(this,"validation"))}),m(".helpText",r.a.translator.trans("flagrow-mason.admin.fields.validation-help",{a:m("a[href=https://laravel.com/docs/5.1/validation#available-validation-rules][_target=blank]")}))]),m(".Form-group",[m("label",[r.a.translator.trans("flagrow-mason.admin.fields.icon"),this.iconPreview(this.field.icon())]),m("input.FormControl",{value:this.field.icon(),oninput:m.withAttr("value",this.updateAttribute.bind(this,"icon"))}),m(".helpText",r.a.translator.trans("flagrow-mason.admin.fields.icon-help",{a:m("a[href=https://fontawesome.com/icons?m=free][_target=blank]")}))])]),m(".Mason-Box--column",[m("h4","Field answers"),m(".Form-group",ue.component({field:this.field}))])]),m("li.ButtonGroup",[oe.a.component({type:"submit",className:"Button Button--primary",children:r.a.translator.trans("flagrow-mason.admin.buttons."+(this.field.exists?"save":"add")+"-field"),loading:this.processing,disabled:!this.readyToSave(),onclick:this.saveField.bind(this)}),this.field.exists?oe.a.component({type:"submit",className:"Button Button--danger",children:r.a.translator.trans("flagrow-mason.admin.buttons.delete-field"),loading:this.processing,onclick:this.deleteField.bind(this)}):""])])},n.updateAttribute=function(e,t){var n;this.field.pushAttributes(((n={})[e]=t,n)),this.dirty=!0},n.readyToSave=function(){return this.dirty},n.saveField=function(){var e=this;this.processing=!0;var t=!this.field.exists;this.field.save(this.field.data.attributes).then((function(){t&&(e.initNewField(),e.toggleFields=!1),e.processing=!1,e.dirty=!1,m.redraw()})).catch((function(t){throw e.processing=!1,t}))},n.deleteField=function(){var e=this;confirm(r.a.translator.trans("flagrow-mason.admin.messages.delete-field-confirmation",{name:this.field.name()}))&&(this.processing=!0,this.field.delete().then((function(){e.processing=!1,m.redraw()})).catch((function(t){throw e.processing=!1,t})))},n.iconPreview=function(e){return e?[" (",r.a.translator.trans("flagrow-mason.admin.fields.icon-preview",{preview:ae()(e)}),")"]:""},t}(te.a),fe=n(24),me=n.n(fe),pe=n(25),he=n.n(pe),ge=function(e){function t(){return e.apply(this,arguments)||this}Object(f.a)(t,e);var n=t.prototype;return n.init=function(){this.fieldsSectionTitle=m.prop(r.a.data.settings["flagrow.mason.fields-section-title"]||""),this.columnCount=m.prop(r.a.data.settings["flagrow.mason.column-count"]||1),this.labelsAsPlaceholders=m.prop(r.a.data.settings["flagrow.mason.labels-as-placeholders"]>0),this.fieldsInHero=m.prop(r.a.data.settings["flagrow.mason.fields-in-hero"]>0),this.hideEmptyFieldsSection=m.prop(r.a.data.settings["flagrow.mason.hide-empty-fields-section"]>0),this.tagsAsFields=m.prop(r.a.data.settings["flagrow.mason.tags-as-fields"]>0),this.tagsFieldName=m.prop(r.a.data.settings["flagrow.mason.tags-field-name"]||""),this.columnOptions={};for(var e=1;e<=3;e++)this.columnOptions[e]=r.a.translator.trans("flagrow-mason.admin.settings.n-columns",{count:e})},n.view=function(){return m(".Mason-Container",[m(".Form-group",[m("label",r.a.translator.trans("flagrow-mason.admin.settings.fields-section-title")),m("input.FormControl",{value:this.fieldsSectionTitle(),placeholder:r.a.translator.trans("flagrow-mason.admin.settings.fields-section-title-placeholder"),onchange:m.withAttr("value",this.updateSetting.bind(this,this.fieldsSectionTitle,"flagrow.mason.fields-section-title"))}),m(".helpText",r.a.translator.trans("flagrow-mason.admin.settings.fields-section-title-help"))]),m(".Form-group",[m("label",r.a.translator.trans("flagrow-mason.admin.settings.column-count")),he.a.component({options:this.columnOptions,value:this.columnCount(),onchange:this.updateSetting.bind(this,this.columnCount,"flagrow.mason.column-count")})]),m(".Form-group",[m("label",se.a.component({state:this.labelsAsPlaceholders(),onchange:this.updateSetting.bind(this,this.labelsAsPlaceholders,"flagrow.mason.labels-as-placeholders"),children:r.a.translator.trans("flagrow-mason.admin.settings.labels-as-placeholders")})),m(".helpText",r.a.translator.trans("flagrow-mason.admin.settings.labels-as-placeholders-help"))]),m(".Form-group",[m("label",se.a.component({state:this.fieldsInHero(),onchange:this.updateSetting.bind(this,this.fieldsInHero,"flagrow.mason.fields-in-hero"),children:r.a.translator.trans("flagrow-mason.admin.settings.fields-in-hero")}))]),m(".Form-group",[m("label",se.a.component({state:this.hideEmptyFieldsSection(),onchange:this.updateSetting.bind(this,this.hideEmptyFieldsSection,"flagrow.mason.hide-empty-fields-section"),children:r.a.translator.trans("flagrow-mason.admin.settings.hide-empty-fields-section")})),m(".helpText",r.a.translator.trans("flagrow-mason.admin.settings.hide-empty-fields-section-help"))]),m(".Form-group",[m("label",se.a.component({state:this.tagsAsFields(),onchange:this.updateSetting.bind(this,this.tagsAsFields,"flagrow.mason.tags-as-fields"),children:r.a.translator.trans("flagrow-mason.admin.settings.tags-as-field")})),m(".helpText",r.a.translator.trans("flagrow-mason.admin.settings.tags-as-field-help"))]),this.tagsAsFields()?m(".Form-group",[m("label",r.a.translator.trans("flagrow-mason.admin.settings.tags-field-name")),m("input.FormControl",{value:this.tagsFieldName(),placeholder:r.a.translator.trans("flagrow-mason.admin.settings.tags-field-name-placeholder"),onchange:m.withAttr("value",this.updateSetting.bind(this,this.tagsFieldName,"flagrow.mason.tags-field-name"))})]):null])},n.updateSetting=function(e,t,n){var a;me()(((a={})[t]=n,a)),e(n)},t}(te.a),we=function(e){function t(){return e.apply(this,arguments)||this}Object(f.a)(t,e);var n=t.prototype;return n.init=function(){r.a.request({method:"GET",url:r.a.forum.attribute("apiUrl")+"/flagrow/mason/fields"}).then((function(e){r.a.store.pushPayload(e),m.redraw()}))},n.config=function(){var e=this;Z(this.element.querySelector(".js-fields-container"),{handle:".js-field-handle"})[0].addEventListener("sortupdate",(function(){var t=e.$(".js-field-data").map((function(){return $(this).data("id")})).get();e.updateSort(t)}))},n.view=function(){var e=r.a.store.all("flagrow-mason-field"),t=[];return Object(de.a)(e).forEach((function(e){t.push(m(".js-field-data",{key:e.id(),"data-id":e.id()},ce.component({field:e})))})),m(".container",[m("h2",r.a.translator.trans("flagrow-mason.admin.titles.fields")),m(".Mason-Container",[m(".js-fields-container",t),ce.component({key:"new",field:null})]),m("h2",r.a.translator.trans("flagrow-mason.admin.titles.settings")),ge.component()])},n.updateSort=function(e){r.a.request({method:"POST",url:r.a.forum.attribute("apiUrl")+"/flagrow/mason/fields/order",data:{sort:e}}).then((function(e){r.a.store.pushPayload(e),m.redraw()}))},t}(te.a),ve=n(10),be=n.n(ve),ye=n(26),_e=n.n(ye);r.a.initializers.add("flagrow-mason",(function(e){e.store.models["flagrow-mason-field"]=i.a,e.store.models["flagrow-mason-answer"]=o.a,r.a.routes["flagrow-mason-fields"]={path:"/flagrow/mason",component:we.component()},r.a.extensionSettings["flagrow-mason"]=function(){return m.route(r.a.route("flagrow-mason-fields"))},Object(s.extend)(d.a.prototype,"items",(function(e){e.add("flagrow-mason-fields",c.a.component({href:r.a.route("flagrow-mason-fields"),icon:"fas fa-dungeon",children:"Mason",description:r.a.translator.trans("flagrow-mason.admin.menu.description")}))})),Object(s.extend)(_e.a.prototype,"permissionItems",(function(e){var t=new be.a;t.add("see-own-fields",{icon:"fas fa-eye",label:r.a.translator.trans("flagrow-mason.admin.permissions.see-own-fields"),permission:"flagrow.mason.see-own-fields"}),t.add("see-other-fields",{icon:"fas fa-eye",label:r.a.translator.trans("flagrow-mason.admin.permissions.see-other-fields"),permission:"flagrow.mason.see-other-fields",allowGuest:!0}),t.add("fill-fields",{icon:"fas fa-tasks",label:r.a.translator.trans("flagrow-mason.admin.permissions.fill-fields"),permission:"flagrow.mason.fill-fields"}),t.add("update-own-fields",{icon:"fas fa-edit",label:r.a.translator.trans("flagrow-mason.admin.permissions.update-own-fields"),permission:"flagrow.mason.update-own-fields"}),t.add("update-other-fields",{icon:"fas fa-edit",label:r.a.translator.trans("flagrow-mason.admin.permissions.update-other-fields"),permission:"flagrow.mason.update-other-fields",allowGuest:!0}),t.add("skip-required-fields",{icon:"fas fa-forward",label:r.a.translator.trans("flagrow-mason.admin.permissions.skip-required-fields"),permission:"flagrow.mason.skip-required-fields"}),e.add("flagrow-mason",{label:r.a.translator.trans("flagrow-mason.admin.permissions.mason-heading"),children:t.toArray()})}))}))}]);
//# sourceMappingURL=admin.js.map